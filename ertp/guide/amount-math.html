<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Amount Math | Documentation</title>
    <meta name="description" content="Secure smart contracts">
    <link rel="icon" href="/documentation/favicon-full.ico">
  <script>
    const logoUrlChanger = setInterval(function() {
    //Anchor above the logo image
    const homeEls = document.getElementsByClassName("home-link");
    if(homeEls.length > 0) {
      const homeEl = homeEls[0];
      homeEl.setAttribute("href", "https://agoric.com");
      homeEl.setAttribute("onclick", "return false;");
      clearInterval(logoUrlChanger);
    }

    //Actual logo image
    const logoEls = document.getElementsByClassName("logo")
    if(logoEls.length > 0) {
      const logoEl = logoEls[0]
      logoEl.setAttribute("onclick", "document.location='https://agoric.com';return false;");
      clearInterval(logoUrlChanger);
    }
   }, 1000) </script>
    
    <link rel="preload" href="/documentation/assets/css/0.styles.67a138ae.css" as="style"><link rel="preload" href="/documentation/assets/js/app.64ed11d9.js" as="script"><link rel="preload" href="/documentation/assets/js/2.bc03ef4c.js" as="script"><link rel="preload" href="/documentation/assets/js/21.752c8434.js" as="script"><link rel="prefetch" href="/documentation/assets/js/10.645605e8.js"><link rel="prefetch" href="/documentation/assets/js/11.c92f48af.js"><link rel="prefetch" href="/documentation/assets/js/12.9a433e8a.js"><link rel="prefetch" href="/documentation/assets/js/13.bdb6655c.js"><link rel="prefetch" href="/documentation/assets/js/14.2222a254.js"><link rel="prefetch" href="/documentation/assets/js/15.4ae196a5.js"><link rel="prefetch" href="/documentation/assets/js/16.cb72aa98.js"><link rel="prefetch" href="/documentation/assets/js/17.d34e30a2.js"><link rel="prefetch" href="/documentation/assets/js/18.9d2884f3.js"><link rel="prefetch" href="/documentation/assets/js/19.6fd6b144.js"><link rel="prefetch" href="/documentation/assets/js/20.4101a66f.js"><link rel="prefetch" href="/documentation/assets/js/22.ec5713d7.js"><link rel="prefetch" href="/documentation/assets/js/23.e89ddb08.js"><link rel="prefetch" href="/documentation/assets/js/24.9f323637.js"><link rel="prefetch" href="/documentation/assets/js/25.9ab25c96.js"><link rel="prefetch" href="/documentation/assets/js/26.3c5f83ed.js"><link rel="prefetch" href="/documentation/assets/js/27.c85e722e.js"><link rel="prefetch" href="/documentation/assets/js/28.3baccd4d.js"><link rel="prefetch" href="/documentation/assets/js/29.76bd5709.js"><link rel="prefetch" href="/documentation/assets/js/3.9963b0cf.js"><link rel="prefetch" href="/documentation/assets/js/30.52236414.js"><link rel="prefetch" href="/documentation/assets/js/31.726a659a.js"><link rel="prefetch" href="/documentation/assets/js/32.6bb3df22.js"><link rel="prefetch" href="/documentation/assets/js/33.bcbf0ac0.js"><link rel="prefetch" href="/documentation/assets/js/34.6f38be19.js"><link rel="prefetch" href="/documentation/assets/js/35.56d0ab85.js"><link rel="prefetch" href="/documentation/assets/js/36.86575df0.js"><link rel="prefetch" href="/documentation/assets/js/37.70cdf0c9.js"><link rel="prefetch" href="/documentation/assets/js/38.f1f78c51.js"><link rel="prefetch" href="/documentation/assets/js/39.fd5313f4.js"><link rel="prefetch" href="/documentation/assets/js/4.444bab69.js"><link rel="prefetch" href="/documentation/assets/js/40.48e1430e.js"><link rel="prefetch" href="/documentation/assets/js/41.e3b2f87c.js"><link rel="prefetch" href="/documentation/assets/js/42.5a0c0185.js"><link rel="prefetch" href="/documentation/assets/js/43.4f1f0a39.js"><link rel="prefetch" href="/documentation/assets/js/44.374ba087.js"><link rel="prefetch" href="/documentation/assets/js/45.c7c8b827.js"><link rel="prefetch" href="/documentation/assets/js/46.65ecf8cc.js"><link rel="prefetch" href="/documentation/assets/js/47.1dbfd966.js"><link rel="prefetch" href="/documentation/assets/js/48.981d0501.js"><link rel="prefetch" href="/documentation/assets/js/49.d38ee0f9.js"><link rel="prefetch" href="/documentation/assets/js/5.c91fbe47.js"><link rel="prefetch" href="/documentation/assets/js/50.ca0729f4.js"><link rel="prefetch" href="/documentation/assets/js/51.2847258f.js"><link rel="prefetch" href="/documentation/assets/js/52.2f2d1615.js"><link rel="prefetch" href="/documentation/assets/js/53.a9c0c233.js"><link rel="prefetch" href="/documentation/assets/js/54.5c863aac.js"><link rel="prefetch" href="/documentation/assets/js/55.ec33d112.js"><link rel="prefetch" href="/documentation/assets/js/56.d60cbfa0.js"><link rel="prefetch" href="/documentation/assets/js/6.e6747751.js"><link rel="prefetch" href="/documentation/assets/js/7.c4018845.js"><link rel="prefetch" href="/documentation/assets/js/8.10130a2a.js"><link rel="prefetch" href="/documentation/assets/js/9.a540c8f2.js">
    <link rel="stylesheet" href="/documentation/assets/css/0.styles.67a138ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/documentation/" class="home-link router-link-active"><img src="/documentation/logo.svg" alt="Documentation" class="logo"> <span class="site-name can-hide">Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Getting Started Menu" class="dropdown-title"><span class="title">Getting Started</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/" class="nav-link">Agoric Dev Tools</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ERTP Menu" class="dropdown-title"><span class="title">ERTP</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/ertp/guide/" class="nav-link router-link-active">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/api/" class="nav-link">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/ERTP" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Zoe Menu" class="dropdown-title"><span class="title">Zoe</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/" class="nav-link">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/contracts/autoswap.html" class="nav-link">Contracts</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/api/" class="nav-link">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/zoe" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="/documentation/dapps/" class="nav-link">Dapp Guide</a></div><div class="nav-item"><a href="/documentation/glossary/" class="nav-link">Glossary</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn More Menu" class="dropdown-title"><span class="title">Learn More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/miscellaneous/contributing.html" class="nav-link">Contributing</a></li><li class="dropdown-item"><!----> <a href="https://agoric.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Agoric
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Agoric/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Getting Started Menu" class="dropdown-title"><span class="title">Getting Started</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/" class="nav-link">Agoric Dev Tools</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ERTP Menu" class="dropdown-title"><span class="title">ERTP</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/ertp/guide/" class="nav-link router-link-active">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/api/" class="nav-link">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/ERTP" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Zoe Menu" class="dropdown-title"><span class="title">Zoe</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/" class="nav-link">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/contracts/autoswap.html" class="nav-link">Contracts</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/api/" class="nav-link">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/zoe" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="/documentation/dapps/" class="nav-link">Dapp Guide</a></div><div class="nav-item"><a href="/documentation/glossary/" class="nav-link">Glossary</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn More Menu" class="dropdown-title"><span class="title">Learn More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/miscellaneous/contributing.html" class="nav-link">Contributing</a></li><li class="dropdown-item"><!----> <a href="https://agoric.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Agoric
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Agoric/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/documentation/getting-started/ertp-introduction/" class="sidebar-link">ERTP Introduction</a></li><li><section class="sidebar-group depth-0"><a href="/documentation/ertp/guide/" class="sidebar-heading clickable router-link-active open"><span>ERTP Guide</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/documentation/ertp/guide/" class="sidebar-link">Electronic Rights Transfer Protocol - ERTP</a></li><li><a href="/documentation/ertp/guide/issuer.html" class="sidebar-link">Issuers</a></li><li><a href="/documentation/ertp/guide/brand.html" class="sidebar-link">Brand</a></li><li><a href="/documentation/ertp/guide/amounts.html" class="sidebar-link">Amounts</a></li><li><a href="/documentation/ertp/guide/amount-math.html" class="active sidebar-link">Amount Math</a></li><li><a href="/documentation/ertp/guide/math-helpers.html" class="sidebar-link">MathHelpers</a></li><li><a href="/documentation/ertp/guide/other-concepts.html" class="sidebar-link">Other Concepts</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/documentation/ertp/api/" class="sidebar-heading clickable"><span>ERTP API</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/documentation/ertp/api/issuer.html" class="sidebar-link">Issuer</a></li><li><a href="/documentation/ertp/api/mint.html" class="sidebar-link">Mint</a></li><li><a href="/documentation/ertp/api/brand.html" class="sidebar-link">Brand</a></li><li><a href="/documentation/ertp/api/purse.html" class="sidebar-link">Purse</a></li><li><a href="/documentation/ertp/api/payment.html" class="sidebar-link">Payment</a></li><li><a href="/documentation/ertp/api/amount-math.html" class="sidebar-link">Amount Math</a></li><li><a href="/documentation/ertp/api/math-helpers.html" class="sidebar-link">Math Helpers</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="amount-math"><a href="#amount-math" class="header-anchor">#</a> Amount Math</h1> <p>The <a href="/documentation/ertp/guide/issuer.html">issuer</a> has an internal table that maps <a href="/documentation/ertp/api/purse.html">purses</a> and <a href="/documentation/ertp/api/payment.html">payments</a> to <a href="/documentation/ertp/guide/amounts.html">amounts</a>. The issuer must be able to do things such as add digital assets to a purse and withdraw digital assets from a purse. To do so, it must know how to add and subtract digital assets. Rather than hard-coding a particular solution, we chose to parameterize the issuer with a collection of polymorphic functions, which we call <code>amountMath</code>. These math functions include concepts like addition, subtraction, and greater than or equal to.</p> <p>We also want to make sure there is no confusion as to what kind of asset we are using. Thus, amountMath includes checks of the <code>brand</code>, the unique identifier for the type of digital asset. If the wrong brand is used in amountMath, an error is thrown and the operation does not succeed.</p> <p>AmountMath uses <a href="/documentation/ertp/guide/math-helpers.html">mathHelpers</a> to do most of the work, but then adds the brand to the result. The amountMath function <code>extent()</code> gets the extent from the amount by removing the brand (amount -&gt; extent), and the function <code>make()</code> adds the brand to produce an amount (extent -&gt; amount). The function <code>coerce()</code> takes an amount and checks it, returning an amount (amount -&gt; amount). <code>makeAmount()</code> takes in a brand and the name of the particular mathHelpers to use.</p> <p>AmountMath is unfortunately not pass-by-copy. If you call <code>getAmountMath()</code> on a remote issuer, it will be a remote object and each call will incur the costs of calling a remote object. However, you can create a local amountMath by importing this module locally and recreating by passing in a brand and a mathHelpers name, both of which can be passed-by-copy (since there are no calls to brand in this module).</p> <p>Each issuer of digital assets has an associated brand in a one-to-one mapping. In untrusted contexts, such as in analyzing payments and amounts, we can get the brand and find the issuer which matches the brand. The issuer and the brand mutually validate each other.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/documentation/ertp/guide/amounts.html" class="prev">Amounts</a></span> <span class="next"><a href="/documentation/ertp/guide/math-helpers.html">MathHelpers</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/documentation/assets/js/app.64ed11d9.js" defer></script><script src="/documentation/assets/js/2.bc03ef4c.js" defer></script><script src="/documentation/assets/js/21.752c8434.js" defer></script>
  </body>
</html>
