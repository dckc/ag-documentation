<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ZoeHelpers | Documentation</title>
    <meta name="description" content="Secure smart contracts">
    <link rel="icon" href="/documentation/favicon-full.ico">
  <script>
    const logoUrlChanger = setInterval(function() {
    //Anchor above the logo image
    const homeEls = document.getElementsByClassName("home-link");
    if(homeEls.length > 0) {
      const homeEl = homeEls[0];
      homeEl.setAttribute("href", "https://agoric.com");
      homeEl.setAttribute("onclick", "return false;");
      clearInterval(logoUrlChanger);
    }

    //Actual logo image
    const logoEls = document.getElementsByClassName("logo")
    if(logoEls.length > 0) {
      const logoEl = logoEls[0]
      logoEl.setAttribute("onclick", "document.location='https://agoric.com';return false;");
      clearInterval(logoUrlChanger);
    }
   }, 1000) </script>
    
    <link rel="preload" href="/documentation/assets/css/0.styles.67a138ae.css" as="style"><link rel="preload" href="/documentation/assets/js/app.13ba724d.js" as="script"><link rel="preload" href="/documentation/assets/js/2.a254c233.js" as="script"><link rel="preload" href="/documentation/assets/js/39.4973eab0.js" as="script"><link rel="prefetch" href="/documentation/assets/js/10.68ff6144.js"><link rel="prefetch" href="/documentation/assets/js/11.df381bf0.js"><link rel="prefetch" href="/documentation/assets/js/12.c655e22b.js"><link rel="prefetch" href="/documentation/assets/js/13.0d89ddb0.js"><link rel="prefetch" href="/documentation/assets/js/14.f95b7a8b.js"><link rel="prefetch" href="/documentation/assets/js/15.87339499.js"><link rel="prefetch" href="/documentation/assets/js/16.54d3fc52.js"><link rel="prefetch" href="/documentation/assets/js/17.c68cedf0.js"><link rel="prefetch" href="/documentation/assets/js/18.5c67c8f7.js"><link rel="prefetch" href="/documentation/assets/js/19.79b98ca6.js"><link rel="prefetch" href="/documentation/assets/js/20.a1c151ab.js"><link rel="prefetch" href="/documentation/assets/js/21.afe8edca.js"><link rel="prefetch" href="/documentation/assets/js/22.baed0fb5.js"><link rel="prefetch" href="/documentation/assets/js/23.2fa1281c.js"><link rel="prefetch" href="/documentation/assets/js/24.a310dfd6.js"><link rel="prefetch" href="/documentation/assets/js/25.81ba4a2c.js"><link rel="prefetch" href="/documentation/assets/js/26.dd58deb0.js"><link rel="prefetch" href="/documentation/assets/js/27.9456125d.js"><link rel="prefetch" href="/documentation/assets/js/28.c7d71fa4.js"><link rel="prefetch" href="/documentation/assets/js/29.335dabbe.js"><link rel="prefetch" href="/documentation/assets/js/3.7a7bfb03.js"><link rel="prefetch" href="/documentation/assets/js/30.ee3a067e.js"><link rel="prefetch" href="/documentation/assets/js/31.db656ee8.js"><link rel="prefetch" href="/documentation/assets/js/32.a5f09512.js"><link rel="prefetch" href="/documentation/assets/js/33.a6986456.js"><link rel="prefetch" href="/documentation/assets/js/34.2972f39f.js"><link rel="prefetch" href="/documentation/assets/js/35.6b76be09.js"><link rel="prefetch" href="/documentation/assets/js/36.835622a2.js"><link rel="prefetch" href="/documentation/assets/js/37.b0a4354b.js"><link rel="prefetch" href="/documentation/assets/js/38.7bd12d92.js"><link rel="prefetch" href="/documentation/assets/js/4.ba1620b8.js"><link rel="prefetch" href="/documentation/assets/js/40.5767a1ea.js"><link rel="prefetch" href="/documentation/assets/js/41.749825e2.js"><link rel="prefetch" href="/documentation/assets/js/42.350332a4.js"><link rel="prefetch" href="/documentation/assets/js/43.0e8e5572.js"><link rel="prefetch" href="/documentation/assets/js/44.e8f21bb8.js"><link rel="prefetch" href="/documentation/assets/js/45.9f83cdcf.js"><link rel="prefetch" href="/documentation/assets/js/46.29b510e0.js"><link rel="prefetch" href="/documentation/assets/js/47.6d4bc85e.js"><link rel="prefetch" href="/documentation/assets/js/48.ec7b0b97.js"><link rel="prefetch" href="/documentation/assets/js/49.f1803017.js"><link rel="prefetch" href="/documentation/assets/js/5.71c368ea.js"><link rel="prefetch" href="/documentation/assets/js/50.a35cffe9.js"><link rel="prefetch" href="/documentation/assets/js/51.f6951e5b.js"><link rel="prefetch" href="/documentation/assets/js/6.8d9d2e21.js"><link rel="prefetch" href="/documentation/assets/js/7.8c693afd.js"><link rel="prefetch" href="/documentation/assets/js/8.be72feb5.js"><link rel="prefetch" href="/documentation/assets/js/9.d38ae586.js">
    <link rel="stylesheet" href="/documentation/assets/css/0.styles.67a138ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/documentation/" class="home-link router-link-active"><img src="/documentation/logo.svg" alt="Documentation" class="logo"> <span class="site-name can-hide">Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Getting Started Menu" class="dropdown-title"><span class="title">Getting Started</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/" class="nav-link">Agoric Dev Tools</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ERTP Menu" class="dropdown-title"><span class="title">ERTP</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/ertp/guide/" class="nav-link">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/api/" class="nav-link">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/ERTP" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Zoe Menu" class="dropdown-title"><span class="title">Zoe</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/" class="nav-link">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/contracts/autoswap.html" class="nav-link">Contracts</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/api/" class="nav-link router-link-active">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/zoe" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="/documentation/dapps/" class="nav-link">Dapp Guide</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn More Menu" class="dropdown-title"><span class="title">Learn More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/miscellaneous/contributing.html" class="nav-link">Contributing</a></li><li class="dropdown-item"><!----> <a href="https://agoric.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Agoric
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Agoric/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Getting Started Menu" class="dropdown-title"><span class="title">Getting Started</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/" class="nav-link">Agoric Dev Tools</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ERTP Menu" class="dropdown-title"><span class="title">ERTP</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/ertp/guide/" class="nav-link">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/api/" class="nav-link">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/ERTP" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Zoe Menu" class="dropdown-title"><span class="title">Zoe</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/" class="nav-link">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/contracts/autoswap.html" class="nav-link">Contracts</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/api/" class="nav-link router-link-active">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/zoe" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="/documentation/dapps/" class="nav-link">Dapp Guide</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn More Menu" class="dropdown-title"><span class="title">Learn More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/miscellaneous/contributing.html" class="nav-link">Contributing</a></li><li class="dropdown-item"><!----> <a href="https://agoric.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Agoric
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Agoric/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/documentation/zoe/guide/" class="sidebar-heading clickable"><span>Zoe</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/documentation/zoe/guide/" class="sidebar-link">Zoe: Offer-Safety Enforcement</a></li><li><a href="/documentation/zoe/guide/offer-safety.html" class="sidebar-link">Offer Safety</a></li><li><a href="/documentation/zoe/guide/proposal.html" class="sidebar-link">The Structure of Proposals</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/documentation/zoe/guide/contracts/" class="sidebar-heading clickable"><span>Zoe Contracts</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/documentation/zoe/guide/contracts/atomic-swap.html" class="sidebar-link">Atomic Swap</a></li><li><a href="/documentation/zoe/guide/contracts/autoswap.html" class="sidebar-link">AutoSwap</a></li><li><a href="/documentation/zoe/guide/contracts/covered-call.html" class="sidebar-link">Covered Call</a></li><li><a href="/documentation/zoe/guide/contracts/second-price-auction.html" class="sidebar-link">Second-price auction</a></li><li><a href="/documentation/zoe/guide/contracts/simple-exchange.html" class="sidebar-link">Simple Exchange</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/documentation/zoe/api/" class="sidebar-heading clickable router-link-active open"><span>Zoe API</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/documentation/zoe/api/zoe.html" class="sidebar-link">Zoe</a></li><li><a href="/documentation/zoe/api/records.html" class="sidebar-link">Records</a></li><li><a href="/documentation/zoe/api/zoe-contract-facet.html" class="sidebar-link">Zoe Contract Facet</a></li><li><a href="/documentation/zoe/api/zoe-helpers.html" class="active sidebar-link">ZoeHelpers</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-helpers.html#zoehelper-assertkeywords-keywords" class="sidebar-link">zoeHelper.assertKeywords(keywords)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-helpers.html#zoehelper-rejectifnotproposal-invitehandle-expectedproposalstructure" class="sidebar-link">zoeHelper.rejectIfNotProposal(inviteHandle, expectedProposalStructure)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-helpers.html#zoehelper-checkifproposal-invitehandle-expectedproposalstructure" class="sidebar-link">zoeHelper.checkIfProposal(inviteHandle, expectedProposalStructure)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-helpers.html#zoehelper-getactiveoffers-offerhandles" class="sidebar-link">zoeHelper.getActiveOffers(offerHandles)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-helpers.html#zoehelper-rejectoffer-offerhandle" class="sidebar-link">zoeHelper.rejectOffer(offerHandle)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-helpers.html#zoehelper-cantradewith-leftinvitehandle-rightinvitehandle" class="sidebar-link">zoeHelper.canTradeWith(leftInviteHandle, rightInviteHandle)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-helpers.html#zoehelper-swap-keephandle-tryhandle-keephandleinactivemsg" class="sidebar-link">zoeHelper.swap(keepHandle, tryHandle, keepHandleInactiveMsg)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-helpers.html#zoehelper-makeemptyoffer" class="sidebar-link">zoeHelper.makeEmptyOffer()</a></li></ul></li></ul></section></li><li><a href="/documentation/zoe/roadmap/" class="sidebar-link">Zoe Roadmap</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="zoehelpers"><a href="#zoehelpers" class="header-anchor">#</a> ZoeHelpers</h1> <p>ZoeHelpers are functions that extract common contract code and
patterns into reusable helpers.</p> <p>These helper functions can be imported from @agoric/zoe/src/contractSupport. We
expect to move them to a separate package shortly, so it would become
'@agoric/zoe-contract-support'. The import provides a function <code>makeZoeHelpers()</code>,
which produces versions of the function that are bound to the current zoe instance.</p> <div class="language- extra-class"><pre class="language-text"><code>import { makeZoeHelpers } from '@agoric/zoe/src/contractSupport/zoeHelpers';

const {
  assertKeywords,
  canTradeWith,
  checkIfProposal,
  rejectOffer,
  swap,
  rejectIfNotProposal,
  getActiveOffers,
  makeEmptyOffer,
} = makeZoeHelpers(zoe);
</code></pre></div><h2 id="zoehelper-assertkeywords-keywords"><a href="#zoehelper-assertkeywords-keywords" class="header-anchor">#</a> zoeHelper.assertKeywords(keywords)</h2> <ul><li><code>keywords</code> <code>{Array &lt;String&gt;}</code></li></ul> <p>Checks that the keywords submitted by the creator of the contract
instance match what the contract expects. Throws if incorrect or if there is
missing or extra keywords. Order of keywords is irrelevant.</p> <div class="language- extra-class"><pre class="language-text"><code>import { makeZoeHelpers } from '@agoric/zoe/src/contractSupport/zoeHelpers';

const { assertKeywords } = makeZoeHelpers(zoe);

// proposal for inviteHandle
const proposal = {
  want: { Asset: moola(4) },
  give: { Price: simoleans(16) },
  exit: { onDemand: null },
}

assertKeywords(['Asset', 'Price']);
</code></pre></div><h2 id="zoehelper-rejectifnotproposal-invitehandle-expectedproposalstructure"><a href="#zoehelper-rejectifnotproposal-invitehandle-expectedproposalstructure" class="header-anchor">#</a> zoeHelper.rejectIfNotProposal(inviteHandle, expectedProposalStructure)</h2> <ul><li><code>inviteHandle</code> <code>{Handle}</code></li> <li><code>expectedProposalStructure</code> <code>{Object}</code></li></ul> <p>Throws and completes the offer if the <code>proposal</code> for the offer indexed by inviteHandle does
not match the <code>expectedProposalStructure</code>. If a property (<code>want</code>,
<code>give</code> or <code>exit</code>) is undefined in
<code>expectedProposalStructure</code>, anything under that property in the
actual proposal is accepted.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> makeZoeHelpers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@agoric/zoe/src/contractSupport/zoeHelpers'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> rejectIfNotProposal <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">makeZoeHelpers</span><span class="token punctuation">(</span>zoe<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// proposal for inviteHandle</span>
<span class="token keyword">const</span> proposal <span class="token operator">=</span> <span class="token punctuation">{</span>
  want<span class="token operator">:</span> <span class="token punctuation">{</span> Asset<span class="token operator">:</span> <span class="token function">moola</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  give<span class="token operator">:</span> <span class="token punctuation">{</span> Price<span class="token operator">:</span> <span class="token function">simoleans</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  exit<span class="token operator">:</span> <span class="token punctuation">{</span> onDemand<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// Throws: &quot;Asset&quot; !== &quot;Assets&quot;</span>
<span class="token function">rejectIfNotProposal</span><span class="token punctuation">(</span>
  inviteHandle<span class="token punctuation">,</span>
  <span class="token function">harden</span><span class="token punctuation">(</span><span class="token punctuation">{</span> want<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Assets'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> give<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Price'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>
</code></pre></div><h2 id="zoehelper-checkifproposal-invitehandle-expectedproposalstructure"><a href="#zoehelper-checkifproposal-invitehandle-expectedproposalstructure" class="header-anchor">#</a> zoeHelper.checkIfProposal(inviteHandle, expectedProposalStructure)</h2> <ul><li><code>inviteHandle</code> <code>{Handle}</code></li> <li><code>expectedProposalStructure</code> <code>{Object}</code></li></ul> <p>Like <code>rejectIfNotProposal</code>, this checks if the proposal has the
expected proposal structure. However, <code>checkIfProposal</code> returns a
boolean and never throws or completes the offer.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> makeZoeHelpers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@agoric/zoe/src/contractSupport/zoeHelpers'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> checkIfProposal <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">makeZoeHelpers</span><span class="token punctuation">(</span>zoe<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// proposal for inviteHandle</span>
<span class="token keyword">const</span> proposal <span class="token operator">=</span> <span class="token punctuation">{</span>
  want<span class="token operator">:</span> <span class="token punctuation">{</span> Asset<span class="token operator">:</span> <span class="token function">moola</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  give<span class="token operator">:</span> <span class="token punctuation">{</span> Price<span class="token operator">:</span> <span class="token function">simoleans</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  exit<span class="token operator">:</span> <span class="token punctuation">{</span> onDemand<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token function">checkIfProposal</span><span class="token punctuation">(</span>
  inviteHandle<span class="token punctuation">,</span>
  <span class="token function">harden</span><span class="token punctuation">(</span><span class="token punctuation">{</span> want<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Assets'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> give<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'Price'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span> <span class="token comment">// =&gt; false</span>
</code></pre></div><h2 id="zoehelper-getactiveoffers-offerhandles"><a href="#zoehelper-getactiveoffers-offerhandles" class="header-anchor">#</a> zoeHelper.getActiveOffers(offerHandles)</h2> <ul><li><code>offerHandle[]</code></li></ul> <p>Returns the offer records, but only if the offer is still active.</p> <h2 id="zoehelper-rejectoffer-offerhandle"><a href="#zoehelper-rejectoffer-offerhandle" class="header-anchor">#</a> zoeHelper.rejectOffer(offerHandle)</h2> <ul><li><code>offerHandle</code></li></ul> <h2 id="zoehelper-cantradewith-leftinvitehandle-rightinvitehandle"><a href="#zoehelper-cantradewith-leftinvitehandle-rightinvitehandle" class="header-anchor">#</a> zoeHelper.canTradeWith(leftInviteHandle, rightInviteHandle)</h2> <ul><li><code>leftInviteHandle</code></li> <li><code>rightInviteHandle</code></li> <li>Returns: <code>{Boolean}</code></li></ul> <p>Checks if the <code>give</code> and <code>want</code> of two invites would satisfy offer
safety if the two allocations are swapped.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> makeZoeHelpers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@agoric/zoe/src/contractSupport/zoeHelpers'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> canTradeWith <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">makeZoeHelpers</span><span class="token punctuation">(</span>zoe<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> leftInvite <span class="token operator">=</span> <span class="token function">harden</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  give<span class="token operator">:</span> <span class="token punctuation">{</span> Asset<span class="token operator">:</span> <span class="token function">moola</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  want<span class="token operator">:</span> <span class="token punctuation">{</span> Price<span class="token operator">:</span> <span class="token function">simoleans</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  exit<span class="token operator">:</span> <span class="token punctuation">{</span> onDemand<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> rightInvite <span class="token operator">=</span> <span class="token function">harden</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  give<span class="token operator">:</span> <span class="token punctuation">{</span> Price<span class="token operator">:</span> <span class="token function">simoleans</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  want<span class="token operator">:</span> <span class="token punctuation">{</span> Asset<span class="token operator">:</span> <span class="token function">moola</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  exit<span class="token operator">:</span> <span class="token punctuation">{</span> onDemand<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> cantTradeRightInvite <span class="token operator">=</span> <span class="token function">harden</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  give<span class="token operator">:</span> <span class="token punctuation">{</span> Price<span class="token operator">:</span> <span class="token function">simoleans</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  want<span class="token operator">:</span> <span class="token punctuation">{</span> Asset<span class="token operator">:</span> <span class="token function">moola</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  exit<span class="token operator">:</span> <span class="token punctuation">{</span> onDemand<span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Returns true</span>
<span class="token function">canTradeWith</span><span class="token punctuation">(</span>leftInvite<span class="token punctuation">,</span> rightInvite<span class="token punctuation">)</span>

<span class="token comment">// Returns false</span>
<span class="token function">canTradeWith</span><span class="token punctuation">(</span>leftInvite<span class="token punctuation">,</span> cantTradeRightInvite<span class="token punctuation">)</span>
</code></pre></div><h2 id="zoehelper-swap-keephandle-tryhandle-keephandleinactivemsg"><a href="#zoehelper-swap-keephandle-tryhandle-keephandleinactivemsg" class="header-anchor">#</a> zoeHelper.swap(keepHandle, tryHandle, keepHandleInactiveMsg)</h2> <ul><li><code>keepHandle</code></li> <li><code>tryHandle</code></li> <li><code>keepHandleInactiveMsg</code></li> <li>Returns: defaultAcceptanceMsg</li></ul> <p>In many contracts, we have a particular offer that we want to find a
match for. We will iterate over a number of potential matches, and try
them out to see if the two offers are swappable. The particular offer
that we are trying to find a match for has the handle <code>keepHandle</code>,
and the offer that we are trying out has the handle <code>tryHandle</code>.</p> <p>If the <code>keepOffer</code> is no longer active, we reject the <code>tryOffer</code> with
the <code>keepHandleInactiveMsg</code>.</p> <p>If <code>canTradeWith</code> returns false for the two offers, we reject the
<code>tryOffer</code>.</p> <p>If <code>canTradeWith</code> is true, we reallocate with Zoe by swapping the
amounts for the two offers, then we complete both offers so that the
users will receive their payout.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> makeZoeHelpers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@agoric/zoe/src/contractSupport/zoeHelpers'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> swap <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">makeZoeHelpers</span><span class="token punctuation">(</span>zoe<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> seat <span class="token operator">=</span> <span class="token function">harden</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">matchOffer</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">swap</span><span class="token punctuation">(</span>firstInviteHandle<span class="token punctuation">,</span> inviteHandle<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zoehelper-makeemptyoffer"><a href="#zoehelper-makeemptyoffer" class="header-anchor">#</a> zoeHelper.makeEmptyOffer()</h2> <ul><li>Returns: a promise for the new inviteHandle</li></ul> <p>Creates an empty offer.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> makeZoeHelpers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@agoric/zoe/src/contractSupport/zoeHelpers'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> makeEmptyOffer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">makeZoeHelpers</span><span class="token punctuation">(</span>zoe<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">makeEmptyOffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">inviteHandle</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/documentation/zoe/api/zoe-contract-facet.html" class="prev">Zoe Contract Facet</a></span> <span class="next"><a href="/documentation/zoe/roadmap/">Zoe Roadmap</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/documentation/assets/js/app.13ba724d.js" defer></script><script src="/documentation/assets/js/2.a254c233.js" defer></script><script src="/documentation/assets/js/39.4973eab0.js" defer></script>
  </body>
</html>
