<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Zoe Contract Facet | Documentation</title>
    <meta name="description" content="Secure smart contracts">
    <link rel="icon" href="/documentation/favicon-full.ico">
  <script>
    const logoUrlChanger = setInterval(function() {
    //Anchor above the logo image
    const homeEls = document.getElementsByClassName("home-link");
    if(homeEls.length > 0) {
      const homeEl = homeEls[0];
      homeEl.setAttribute("href", "https://agoric.com");
      homeEl.setAttribute("onclick", "return false;");
      clearInterval(logoUrlChanger);
    }

    //Actual logo image
    const logoEls = document.getElementsByClassName("logo")
    if(logoEls.length > 0) {
      const logoEl = logoEls[0]
      logoEl.setAttribute("onclick", "document.location='https://agoric.com';return false;");
      clearInterval(logoUrlChanger);
    }
   }, 1000) </script>
    
    <link rel="preload" href="/documentation/assets/css/0.styles.67a138ae.css" as="style"><link rel="preload" href="/documentation/assets/js/app.2df50b56.js" as="script"><link rel="preload" href="/documentation/assets/js/2.6d0b7edb.js" as="script"><link rel="preload" href="/documentation/assets/js/46.04f8fc94.js" as="script"><link rel="preload" href="/documentation/assets/js/10.362cc03c.js" as="script"><link rel="prefetch" href="/documentation/assets/js/11.a529b9e7.js"><link rel="prefetch" href="/documentation/assets/js/12.fbe8e47b.js"><link rel="prefetch" href="/documentation/assets/js/13.56f7d82e.js"><link rel="prefetch" href="/documentation/assets/js/14.e9b321f0.js"><link rel="prefetch" href="/documentation/assets/js/15.9a74d9dd.js"><link rel="prefetch" href="/documentation/assets/js/16.ec13af85.js"><link rel="prefetch" href="/documentation/assets/js/17.c4a17999.js"><link rel="prefetch" href="/documentation/assets/js/18.72b4879e.js"><link rel="prefetch" href="/documentation/assets/js/19.35570dc6.js"><link rel="prefetch" href="/documentation/assets/js/20.9bdd7a34.js"><link rel="prefetch" href="/documentation/assets/js/21.43792df4.js"><link rel="prefetch" href="/documentation/assets/js/22.f24bc250.js"><link rel="prefetch" href="/documentation/assets/js/23.2df7941a.js"><link rel="prefetch" href="/documentation/assets/js/24.8b5d92fd.js"><link rel="prefetch" href="/documentation/assets/js/25.b7a5c3f0.js"><link rel="prefetch" href="/documentation/assets/js/26.f61138df.js"><link rel="prefetch" href="/documentation/assets/js/27.ef08c83c.js"><link rel="prefetch" href="/documentation/assets/js/28.8dad0aae.js"><link rel="prefetch" href="/documentation/assets/js/29.2bcb77cd.js"><link rel="prefetch" href="/documentation/assets/js/3.fc60736d.js"><link rel="prefetch" href="/documentation/assets/js/30.348bc094.js"><link rel="prefetch" href="/documentation/assets/js/31.df3c95e4.js"><link rel="prefetch" href="/documentation/assets/js/32.199e852f.js"><link rel="prefetch" href="/documentation/assets/js/33.d2624cfe.js"><link rel="prefetch" href="/documentation/assets/js/34.039a6f48.js"><link rel="prefetch" href="/documentation/assets/js/35.84e504f2.js"><link rel="prefetch" href="/documentation/assets/js/36.850f322a.js"><link rel="prefetch" href="/documentation/assets/js/37.f9cf5de9.js"><link rel="prefetch" href="/documentation/assets/js/38.4b17e80d.js"><link rel="prefetch" href="/documentation/assets/js/39.00ceedd2.js"><link rel="prefetch" href="/documentation/assets/js/4.52e0bba5.js"><link rel="prefetch" href="/documentation/assets/js/40.3bb5f039.js"><link rel="prefetch" href="/documentation/assets/js/41.45d719a6.js"><link rel="prefetch" href="/documentation/assets/js/42.a3915b3f.js"><link rel="prefetch" href="/documentation/assets/js/43.fd40f970.js"><link rel="prefetch" href="/documentation/assets/js/44.f6691292.js"><link rel="prefetch" href="/documentation/assets/js/45.6257a241.js"><link rel="prefetch" href="/documentation/assets/js/47.ca411084.js"><link rel="prefetch" href="/documentation/assets/js/48.9aad1a68.js"><link rel="prefetch" href="/documentation/assets/js/49.f5e5b7eb.js"><link rel="prefetch" href="/documentation/assets/js/5.b5f60bd6.js"><link rel="prefetch" href="/documentation/assets/js/50.3998ab20.js"><link rel="prefetch" href="/documentation/assets/js/51.7fe24a9f.js"><link rel="prefetch" href="/documentation/assets/js/52.28f4ff8a.js"><link rel="prefetch" href="/documentation/assets/js/53.8656b6fd.js"><link rel="prefetch" href="/documentation/assets/js/54.8259b7d0.js"><link rel="prefetch" href="/documentation/assets/js/55.6c54e45f.js"><link rel="prefetch" href="/documentation/assets/js/56.4c7f9760.js"><link rel="prefetch" href="/documentation/assets/js/57.bfd55760.js"><link rel="prefetch" href="/documentation/assets/js/58.0f280a9e.js"><link rel="prefetch" href="/documentation/assets/js/59.a7a01507.js"><link rel="prefetch" href="/documentation/assets/js/6.0d095770.js"><link rel="prefetch" href="/documentation/assets/js/60.59e92a9d.js"><link rel="prefetch" href="/documentation/assets/js/7.fdf5defe.js"><link rel="prefetch" href="/documentation/assets/js/8.1b0ba544.js"><link rel="prefetch" href="/documentation/assets/js/9.99f88d3c.js">
    <link rel="stylesheet" href="/documentation/assets/css/0.styles.67a138ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/documentation/" class="home-link router-link-active"><img src="/documentation/logo.svg" alt="Documentation" class="logo"> <span class="site-name can-hide">Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Getting Started Menu" class="dropdown-title"><span class="title">Getting Started</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/" class="nav-link">Documentation Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/before-using-agoric.html" class="nav-link">Before Using Agoric</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/start-a-project.html" class="nav-link">Starting a Project</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/development-cycle.html" class="nav-link">Development Cycle</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/ertp-introduction.html" class="nav-link">ERTP Introduction</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/intro-zoe.html" class="nav-link">Zoe Introduction</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/agoric-cli-guide.html" class="nav-link">Agoric CLI Guide</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guides" class="dropdown-title"><span class="title">Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/" class="nav-link">Documentation</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/agoric-cli-guide/" class="nav-link">Agoric CLI</a></li><li class="dropdown-item"><!----> <a href="/documentation/dapps/" class="nav-link">Agoric Dapps</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/guide/" class="nav-link">ERTP</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/" class="nav-link">Zoe</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/blob/master/packages/SwingSet/docs/networking.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Dynamic IBC (dIBC)
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/documentation/distributed-programming.html" class="nav-link">JS Distributed Programming</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Zoe Menu" class="dropdown-title"><span class="title">Zoe</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/intro-zoe.html" class="nav-link">Introduction</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/" class="nav-link">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/contracts/autoswap.html" class="nav-link">Contracts</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/api/" class="nav-link router-link-active">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/zoe" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ERTP Menu" class="dropdown-title"><span class="title">ERTP</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/ertp-introduction/" class="nav-link">Introduction</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/guide/" class="nav-link">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/api/" class="nav-link">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/ERTP" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Platform Menu" class="dropdown-title"><span class="title">Platform</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/platform/" class="nav-link">Agoric Stack</a></li></ul></div></div><div class="nav-item"><a href="/documentation/glossary/" class="nav-link">Glossary</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn More Menu" class="dropdown-title"><span class="title">Learn More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://agoric.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Agoric
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://agoric.com/papers/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Papers
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Getting Started Menu" class="dropdown-title"><span class="title">Getting Started</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/" class="nav-link">Documentation Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/before-using-agoric.html" class="nav-link">Before Using Agoric</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/start-a-project.html" class="nav-link">Starting a Project</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/development-cycle.html" class="nav-link">Development Cycle</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/ertp-introduction.html" class="nav-link">ERTP Introduction</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/intro-zoe.html" class="nav-link">Zoe Introduction</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/agoric-cli-guide.html" class="nav-link">Agoric CLI Guide</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Guides" class="dropdown-title"><span class="title">Guides</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/" class="nav-link">Documentation</a></li><li class="dropdown-item"><!----> <a href="/documentation/getting-started/agoric-cli-guide/" class="nav-link">Agoric CLI</a></li><li class="dropdown-item"><!----> <a href="/documentation/dapps/" class="nav-link">Agoric Dapps</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/guide/" class="nav-link">ERTP</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/" class="nav-link">Zoe</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/blob/master/packages/SwingSet/docs/networking.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Dynamic IBC (dIBC)
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/documentation/distributed-programming.html" class="nav-link">JS Distributed Programming</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Zoe Menu" class="dropdown-title"><span class="title">Zoe</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/intro-zoe.html" class="nav-link">Introduction</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/" class="nav-link">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/contracts/autoswap.html" class="nav-link">Contracts</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/api/" class="nav-link router-link-active">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/zoe" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ERTP Menu" class="dropdown-title"><span class="title">ERTP</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/ertp-introduction/" class="nav-link">Introduction</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/guide/" class="nav-link">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/api/" class="nav-link">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/ERTP" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Platform Menu" class="dropdown-title"><span class="title">Platform</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/platform/" class="nav-link">Agoric Stack</a></li></ul></div></div><div class="nav-item"><a href="/documentation/glossary/" class="nav-link">Glossary</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn More Menu" class="dropdown-title"><span class="title">Learn More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://agoric.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Agoric
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://agoric.com/papers/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Papers
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/documentation/getting-started/intro-zoe.html" class="sidebar-link">Zoe Introduction</a></li><li><section class="sidebar-group depth-0"><a href="/documentation/zoe/guide/" class="sidebar-heading clickable"><span>Zoe Guide</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/documentation/zoe/guide/" class="sidebar-link">Zoe: Offer-Safety Enforcement</a></li><li><a href="/documentation/zoe/guide/offer-safety.html" class="sidebar-link">Offer Safety</a></li><li><a href="/documentation/zoe/guide/proposal.html" class="sidebar-link">The Structure of Proposals</a></li><li><a href="/documentation/zoe/guide/contract-requirements.html" class="sidebar-link">Contract Requirements</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/documentation/zoe/guide/contracts/" class="sidebar-heading clickable"><span>Zoe Contracts</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/documentation/zoe/guide/contracts/atomic-swap.html" class="sidebar-link">Atomic Swap</a></li><li><a href="/documentation/zoe/guide/contracts/autoswap.html" class="sidebar-link">AutoSwap</a></li><li><a href="/documentation/zoe/guide/contracts/covered-call.html" class="sidebar-link">Covered Call</a></li><li><a href="/documentation/zoe/guide/contracts/second-price-auction.html" class="sidebar-link">Second-price auction</a></li><li><a href="/documentation/zoe/guide/contracts/simple-exchange.html" class="sidebar-link">Simple Exchange</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/documentation/zoe/api/" class="sidebar-heading clickable router-link-active open"><span>Zoe API</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/documentation/zoe/api/zoe.html" class="sidebar-link">Zoe</a></li><li><a href="/documentation/zoe/api/records.html" class="sidebar-link">Records</a></li><li><a href="/documentation/zoe/api/zoe-contract-facet.html" class="active sidebar-link">Zoe Contract Facet</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-reallocate-offerhandles-reallocation" class="sidebar-link">zcf.reallocate(offerHandles, reallocation)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-complete-offerhandles" class="sidebar-link">zcf.complete(offerHandles)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-addnewissuer-issuer-keyword" class="sidebar-link">zcf.addNewIssuer(issuer, keyword)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-getzoeservice" class="sidebar-link">zcf.getZoeService()</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-makeinvitation-offerhook-customproperties" class="sidebar-link">zcf.MakeInvitation(offerHook, customProperties)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-getinviteissuer" class="sidebar-link">zcf.getInviteIssuer()</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-getamountmaths-keywords" class="sidebar-link">zcf.getAmountMaths(keywords)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-isofferactive-offerhandle" class="sidebar-link">zcf.isOfferActive(offerHandle)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-getofferstatuses-offerhandles" class="sidebar-link">zcf.getOfferStatuses(offerHandles)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-getoffers-offerhandles" class="sidebar-link">zcf.getOffers(offerHandles)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-getoffer-offerhandle" class="sidebar-link">zcf.getOffer(offerHandle)</a></li><li class="sidebar-sub-header"><a href="/documentation/zoe/api/zoe-contract-facet.html#zcf-getinstancerecord" class="sidebar-link">zcf.getInstanceRecord()</a></li></ul></li><li><a href="/documentation/zoe/api/zoe-helpers.html" class="sidebar-link">ZoeHelpers</a></li></ul></section></li><li><a href="/documentation/zoe/roadmap/" class="sidebar-link">Zoe Roadmap</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="zoe-contract-facet"><a href="#zoe-contract-facet" class="header-anchor">#</a> Zoe Contract Facet</h1> <div class="zoe-version">
    Zoe v0.5.0. Last updated
    4/20/2020.
</div> <p>A Zoe Contract Facet is an API object for a running contract instance to access the Zoe state for that instance. A Zoe Contract Facet is access synchronously from within the contract, and usually is referred to in code as <code>zcf</code>. The contract instance is launched by <code>E(zoe).makeInstance</code>, and is given access to the <code>zcf</code> object during that launch. In the operation below, the <code>instanceHandle</code> is the handle for the running contract instance.</p> <h2 id="zcf-reallocate-offerhandles-reallocation"><a href="#zcf-reallocate-offerhandles-reallocation" class="header-anchor">#</a> zcf.reallocate(offerHandles, reallocation)</h2> <ul><li><code>offerHandles</code> <a href="/documentation/glossary/#handle"><code>{Array &lt;Handle&gt;}</code></a></li> <li><code>reallocation</code> <a href="/documentation/zoe/api/records.html#amountkeywordrecord"><code>{Array &lt;AmountKeywordRecord&gt;}</code></a></li></ul> <p>Instruct Zoe to try reallocating for the given <code>offerHandles</code>. Reallocation is an array of <code>AmountKeywordRecords</code>, which are objects where the keys are keywords and the values are amounts. The amount to be paid to the player who made the offer at the same index in the <code>offerHandles</code> array. The reallocation will only happen if 'offer safety' and conservation of rights are true, as enforced by Zoe.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> harden <span class="token keyword">from</span> <span class="token string">'@agoric/harden'</span><span class="token punctuation">;</span>

<span class="token comment">// reallocate by switching the amount of the firstOffer and matchingOffer</span>
zoe<span class="token punctuation">.</span><span class="token function">reallocate</span><span class="token punctuation">(</span>
  <span class="token function">harden</span><span class="token punctuation">(</span><span class="token punctuation">[</span>firstOfferHandle<span class="token punctuation">,</span> matchingOfferHandle<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">harden</span><span class="token punctuation">(</span><span class="token punctuation">[</span>matchingOfferAmount<span class="token punctuation">,</span> firstOfferAmount<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zcf-complete-offerhandles"><a href="#zcf-complete-offerhandles" class="header-anchor">#</a> zcf.complete(offerHandles)</h2> <ul><li><code>offerHandles</code> <a href="/documentation/glossary/#handle"><code>{Array &lt;Handle&gt;}</code></a></li></ul> <p>Eject the offer, taking the current allocation for that offer and creating payments to be returned to the user. No 'offer safety' checks are done here because any previous reallocation performed those checks.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> harden <span class="token keyword">from</span> <span class="token string">'@agoric/harden'</span><span class="token punctuation">;</span>

zoe<span class="token punctuation">.</span><span class="token function">complete</span><span class="token punctuation">(</span><span class="token function">harden</span><span class="token punctuation">(</span><span class="token punctuation">[</span>someOfferHandle<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zcf-addnewissuer-issuer-keyword"><a href="#zcf-addnewissuer-issuer-keyword" class="header-anchor">#</a> zcf.addNewIssuer(issuer, keyword)</h2> <ul><li><code>issuer</code> <a href="/documentation/ertp/api/issuer.html"><code>{Issuer}</code></a></li> <li><code>keyword</code> <code>{String}</code></li> <li>Returns: <code>{Promise}</code></li></ul> <p>Inform Zoe about a new issuer. Returns a promise for acknowledging when the issuer is added and ready.</p> <div class="language-js extra-class"><pre class="language-js"><code>zoe<span class="token punctuation">.</span><span class="token function">addNewIssuer</span><span class="token punctuation">(</span>liquidityIssuer<span class="token punctuation">,</span> <span class="token string">'Liquidity'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//do stuff</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zcf-getzoeservice"><a href="#zcf-getzoeservice" class="header-anchor">#</a> zcf.getZoeService()</h2> <ul><li>Returns: <a href="/documentation/zoe/api/zoe.html#zoe"><code>{ZoeService}</code></a></li></ul> <p>Expose the user-facing <a href="/documentation/zoe/api/zoe.html#zoe">Zoe Service API</a> to the contracts as well.</p> <h2 id="zcf-makeinvitation-offerhook-customproperties"><a href="#zcf-makeinvitation-offerhook-customproperties" class="header-anchor">#</a> zcf.MakeInvitation(offerHook, customProperties)</h2> <ul><li><code>offerHook</code> <code>{OfferHandle =&gt; Object}</code></li> <li><code>customProperties</code> <code>{Object}</code></li> <li>Returns: <a href="/documentation/ertp/api/payment.html#payment"><code>{Invite}</code></a></li></ul> <p>Make a credible Zoe invite for the associated smart contract. The Invite
is a <code>Payment</code> minted from Zoe's internal <code>inviteMint</code>. It can be used
in <code>E(zoe).offer</code> for the holder of it to participate in this contract.</p> <p>When an offer is submitted via the invitation, <code>offerHook</code> will be
invoked in the contract with a handle for the offer. The result of the
<code>offerHook</code> will be returned as the &quot;outcome&quot; of making the offer via
the invitation.</p> <p>The <code>customProperties</code> is an object whose properties contain information
as defined by the smart contract, to include in the extent of the
invitation.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> invite <span class="token operator">=</span> zoe<span class="token punctuation">.</span><span class="token function">makeInvitation</span><span class="token punctuation">(</span>
  myAuction<span class="token punctuation">.</span>onNewOffer<span class="token punctuation">,</span>
  <span class="token punctuation">{</span> inviteDesc<span class="token operator">:</span> <span class="token string">'bid'</span><span class="token punctuation">,</span> auctionedAssets<span class="token operator">:</span> tickets3<span class="token punctuation">,</span> minimumBid<span class="token operator">:</span> simoleans100 <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zcf-getinviteissuer"><a href="#zcf-getinviteissuer" class="header-anchor">#</a> zcf.getInviteIssuer()</h2> <ul><li>Returns: <a href="/documentation/ertp/api/issuer.html"><code>{Issuer}</code></a></li></ul> <p>Get the Zoe <code>inviteIssuer</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> inviteIssuer <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">E</span><span class="token punctuation">(</span>zoe<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInviteIssuer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zcf-getamountmaths-keywords"><a href="#zcf-getamountmaths-keywords" class="header-anchor">#</a> zcf.getAmountMaths(keywords)</h2> <ul><li><code>keywords</code> <code>{Array &lt;String&gt;}</code></li> <li>Returns: <a href="/documentation/zoe/api/records.html#amountmathkeywordrecord"><code>{AmountMathKeywordRecord}</code></a></li></ul> <p>Pass in an array of keywords and get an amountMathKeywordRecord in return.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> amountMathKeywordRecord <span class="token operator">=</span> zoe<span class="token punctuation">.</span><span class="token function">getAmountMaths</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Asset'</span><span class="token punctuation">,</span> <span class="token string">'Price'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zcf-isofferactive-offerhandle"><a href="#zcf-isofferactive-offerhandle" class="header-anchor">#</a> zcf.isOfferActive(offerHandle)</h2> <ul><li><code>offerHandles</code> <a href="/documentation/glossary/#handle"><code>{Array &lt;Handle&gt;}</code></a></li> <li>Returns: <code>{Boolean}</code></li></ul> <p>Check if the offer is still active. This method does not throw if the offer is inactive.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> isActive <span class="token operator">=</span> zoe<span class="token punctuation">.</span><span class="token function">isOfferActive</span><span class="token punctuation">(</span>someOfferHandle<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zcf-getofferstatuses-offerhandles"><a href="#zcf-getofferstatuses-offerhandles" class="header-anchor">#</a> zcf.getOfferStatuses(offerHandles)</h2> <ul><li><code>offerHandles</code> <a href="/documentation/glossary/#handle"><code>{Array &lt;Handle&gt;}</code></a></li> <li>Returns: <a href="/documentation/zoe/api/records.html#offerstatuses-record"><code>{OfferStatusesRecord}</code></a></li></ul> <p>Divide the <code>offerHandles</code> into 'active' and 'inactive' lists</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> active<span class="token operator">:</span> activeBidHandles <span class="token punctuation">}</span> <span class="token operator">=</span> zoe<span class="token punctuation">.</span><span class="token function">getOfferStatuses</span><span class="token punctuation">(</span>
  <span class="token function">harden</span><span class="token punctuation">(</span>allBidHandles<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zcf-getoffers-offerhandles"><a href="#zcf-getoffers-offerhandles" class="header-anchor">#</a> zcf.getOffers(offerHandles)</h2> <ul><li><code>offerHandles</code> <a href="/documentation/glossary/#handle"><code>{Array &lt;Handle&gt;}</code></a></li> <li>Returns: <a href="/documentation/zoe/api/records.html#offer-record"><code>{Array &lt;OfferRecord&gt;}</code></a></li></ul> <p>Get a list of offer records.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> offers <span class="token operator">=</span> zoe<span class="token punctuation">.</span><span class="token function">getOffers</span><span class="token punctuation">(</span>listOfOfferHandles<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zcf-getoffer-offerhandle"><a href="#zcf-getoffer-offerhandle" class="header-anchor">#</a> zcf.getOffer(offerHandle)</h2> <ul><li><code>offerHandle</code> <a href="/documentation/glossary/#handle"><code>{Array &lt;Handle&gt;}</code></a></li> <li>Returns: <a href="/documentation/zoe/api/records.html#offer-record"><code>{&lt;OfferRecord&gt;}</code></a></li></ul> <p>Get the offer record.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> payoutRules <span class="token punctuation">}</span> <span class="token operator">=</span> zoe<span class="token punctuation">.</span><span class="token function">getOffer</span><span class="token punctuation">(</span>offerHandle<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="zcf-getinstancerecord"><a href="#zcf-getinstancerecord" class="header-anchor">#</a> zcf.getInstanceRecord()</h2> <ul><li>Returns: <a href="/documentation/zoe/api/records.html#instance-record-properties"><code>{InstanceRecord}</code></a></li></ul> <p>Get the instance record. This allows the contracts to get access
to their keywords, issuers and other &quot;instanceRecord&quot; information from
Zoe.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> issuerKeywordRecord<span class="token punctuation">,</span> keywords<span class="token punctuation">,</span> terms <span class="token punctuation">}</span> <span class="token operator">=</span> zoe<span class="token punctuation">.</span><span class="token function">getInstanceRecord</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/documentation/zoe/api/records.html" class="prev">Records</a></span> <span class="next"><a href="/documentation/zoe/api/zoe-helpers.html">ZoeHelpers</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/documentation/assets/js/app.2df50b56.js" defer></script><script src="/documentation/assets/js/2.6d0b7edb.js" defer></script><script src="/documentation/assets/js/46.04f8fc94.js" defer></script><script src="/documentation/assets/js/10.362cc03c.js" defer></script>
  </body>
</html>
