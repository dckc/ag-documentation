<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Pixel Demo | Documentation</title>
    <meta name="description" content="Secure smart contracts">
    <link rel="icon" href="/documentation/favicon-full.ico">
  <script>
    const logoUrlChanger = setInterval(function() {
    //Anchor above the logo image
    const homeEls = document.getElementsByClassName("home-link");
    if(homeEls.length > 0) {
      const homeEl = homeEls[0];
      homeEl.setAttribute("href", "https://agoric.com");
      homeEl.setAttribute("onclick", "return false;");
      clearInterval(logoUrlChanger);
    }

    //Actual logo image
    const logoEls = document.getElementsByClassName("logo")
    if(logoEls.length > 0) {
      const logoEl = logoEls[0]
      logoEl.setAttribute("onclick", "document.location='https://agoric.com';return false;");
      clearInterval(logoUrlChanger);
    }
   }, 1000) </script>
    
    <link rel="preload" href="/documentation/assets/css/0.styles.67a138ae.css" as="style"><link rel="preload" href="/documentation/assets/js/app.4487f628.js" as="script"><link rel="preload" href="/documentation/assets/js/2.a254c233.js" as="script"><link rel="preload" href="/documentation/assets/js/6.8d9d2e21.js" as="script"><link rel="prefetch" href="/documentation/assets/js/10.68ff6144.js"><link rel="prefetch" href="/documentation/assets/js/11.df381bf0.js"><link rel="prefetch" href="/documentation/assets/js/12.c655e22b.js"><link rel="prefetch" href="/documentation/assets/js/13.0d89ddb0.js"><link rel="prefetch" href="/documentation/assets/js/14.f95b7a8b.js"><link rel="prefetch" href="/documentation/assets/js/15.87339499.js"><link rel="prefetch" href="/documentation/assets/js/16.54d3fc52.js"><link rel="prefetch" href="/documentation/assets/js/17.c68cedf0.js"><link rel="prefetch" href="/documentation/assets/js/18.5c67c8f7.js"><link rel="prefetch" href="/documentation/assets/js/19.79b98ca6.js"><link rel="prefetch" href="/documentation/assets/js/20.a1c151ab.js"><link rel="prefetch" href="/documentation/assets/js/21.afe8edca.js"><link rel="prefetch" href="/documentation/assets/js/22.ea0988fe.js"><link rel="prefetch" href="/documentation/assets/js/23.8b78fd4a.js"><link rel="prefetch" href="/documentation/assets/js/24.7500a6c4.js"><link rel="prefetch" href="/documentation/assets/js/25.66da6e54.js"><link rel="prefetch" href="/documentation/assets/js/26.f0610b77.js"><link rel="prefetch" href="/documentation/assets/js/27.b498d103.js"><link rel="prefetch" href="/documentation/assets/js/28.ca592c45.js"><link rel="prefetch" href="/documentation/assets/js/29.130a2a77.js"><link rel="prefetch" href="/documentation/assets/js/3.6576bde7.js"><link rel="prefetch" href="/documentation/assets/js/30.bc398b1b.js"><link rel="prefetch" href="/documentation/assets/js/31.c80ae848.js"><link rel="prefetch" href="/documentation/assets/js/32.3a2cd5f0.js"><link rel="prefetch" href="/documentation/assets/js/33.a6986456.js"><link rel="prefetch" href="/documentation/assets/js/34.2972f39f.js"><link rel="prefetch" href="/documentation/assets/js/35.6b76be09.js"><link rel="prefetch" href="/documentation/assets/js/36.835622a2.js"><link rel="prefetch" href="/documentation/assets/js/37.b0a4354b.js"><link rel="prefetch" href="/documentation/assets/js/38.7bd12d92.js"><link rel="prefetch" href="/documentation/assets/js/39.4973eab0.js"><link rel="prefetch" href="/documentation/assets/js/4.ba1620b8.js"><link rel="prefetch" href="/documentation/assets/js/40.5767a1ea.js"><link rel="prefetch" href="/documentation/assets/js/41.749825e2.js"><link rel="prefetch" href="/documentation/assets/js/42.350332a4.js"><link rel="prefetch" href="/documentation/assets/js/43.0e8e5572.js"><link rel="prefetch" href="/documentation/assets/js/44.e8f21bb8.js"><link rel="prefetch" href="/documentation/assets/js/45.9f83cdcf.js"><link rel="prefetch" href="/documentation/assets/js/46.29b510e0.js"><link rel="prefetch" href="/documentation/assets/js/47.6d4bc85e.js"><link rel="prefetch" href="/documentation/assets/js/48.ec7b0b97.js"><link rel="prefetch" href="/documentation/assets/js/49.f1803017.js"><link rel="prefetch" href="/documentation/assets/js/5.71c368ea.js"><link rel="prefetch" href="/documentation/assets/js/50.a35cffe9.js"><link rel="prefetch" href="/documentation/assets/js/51.f6951e5b.js"><link rel="prefetch" href="/documentation/assets/js/7.d06c5025.js"><link rel="prefetch" href="/documentation/assets/js/8.be72feb5.js"><link rel="prefetch" href="/documentation/assets/js/9.d38ae586.js">
    <link rel="stylesheet" href="/documentation/assets/css/0.styles.67a138ae.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/documentation/" class="home-link router-link-active"><img src="/documentation/logo.svg" alt="Documentation" class="logo"> <span class="site-name can-hide">Documentation</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Getting Started Menu" class="dropdown-title"><span class="title">Getting Started</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/" class="nav-link">Agoric Dev Tools</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ERTP Menu" class="dropdown-title"><span class="title">ERTP</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/ertp/guide/" class="nav-link">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/api/" class="nav-link">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/ERTP" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Zoe Menu" class="dropdown-title"><span class="title">Zoe</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/" class="nav-link">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/contracts/autoswap.html" class="nav-link">Contracts</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/api/" class="nav-link">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/zoe" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="/documentation/dapps/" class="nav-link">Dapp Guide</a></div><div class="nav-item"><a href="/documentation/glossary/" class="nav-link">Glossary</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn More Menu" class="dropdown-title"><span class="title">Learn More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/miscellaneous/contributing.html" class="nav-link">Contributing</a></li><li class="dropdown-item"><!----> <a href="https://agoric.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Agoric
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Agoric/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Getting Started Menu" class="dropdown-title"><span class="title">Getting Started</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/getting-started/" class="nav-link">Agoric Dev Tools</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="ERTP Menu" class="dropdown-title"><span class="title">ERTP</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/ertp/guide/" class="nav-link">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/ertp/api/" class="nav-link">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/ERTP" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Zoe Menu" class="dropdown-title"><span class="title">Zoe</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/" class="nav-link">Guide</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/guide/contracts/autoswap.html" class="nav-link">Contracts</a></li><li class="dropdown-item"><!----> <a href="/documentation/zoe/api/" class="nav-link">API</a></li><li class="dropdown-item"><!----> <a href="https://github.com/Agoric/agoric-sdk/tree/master/packages/zoe" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="/documentation/dapps/" class="nav-link">Dapp Guide</a></div><div class="nav-item"><a href="/documentation/glossary/" class="nav-link">Glossary</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Learn More Menu" class="dropdown-title"><span class="title">Learn More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/documentation/miscellaneous/contributing.html" class="nav-link">Contributing</a></li><li class="dropdown-item"><!----> <a href="https://agoric.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Agoric
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Agoric/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="pixel-demo"><a href="#pixel-demo" class="header-anchor">#</a> Pixel Demo</h1> <p>This demo is roughly based on <a href="https://en.wikipedia.org/wiki/Place_(Reddit)" target="_blank" rel="noopener noreferrer">Reddit's
r/Place<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, but has a
number of additional features that showcase the unique affordances of
the Agoric platform, including: higher-order contracts, easy creation
of new assets, and safe code reusability.</p> <table><thead><tr><th style="text-align:center;"><img src="/documentation/assets/img/rplace.39a64ca5.png" alt="Reddit's r/place"></th></tr></thead> <tbody><tr><td style="text-align:center;"><em>Reddit's r/place as a social experiment in cooperation</em></td></tr></tbody></table> <h2 id="installation"><a href="#installation" class="header-anchor">#</a> Installation</h2> <table><thead><tr><th style="text-align:center;"><img src="/documentation/assets/img/pixel-demo.a4f6abd1.png" alt="Pixel Gallery"></th></tr></thead> <tbody><tr><td style="text-align:center;"><em>The testnet pixel demo. Slightly fewer pixels.</em></td></tr></tbody></table> <p>The pixel demo runs on <a href="https://github.com/Agoric/cosmic-swingset#agorics-cosmic-swingset" target="_blank" rel="noopener noreferrer">our private testnet<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. For instructions on how to
run a local, off-chain version for yourself, please see <a href="https://github.com/Agoric/cosmic-swingset#different-scenarios" target="_blank" rel="noopener noreferrer">Scenario 3
here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="getting-started"><a href="#getting-started" class="header-anchor">#</a> Getting Started</h2> <p>In the pixel demo, the goal is to be able to amass enough pixels to
draw a design on a pixel canvas. You start out empty-handed, with no
money and no pixels to your name. However, you do have access to the <em>gallery</em>, the
administrator of the canvas. The gallery has a handful of
methods that allow you to obtain a few pixels for free, color them,
sell them, and buy more.</p> <p>To access the gallery, type <code>home.gallery</code> in the REPL. <code>home.gallery</code>
is a remote object (what we call a <em>presence</em>). It actually lives in
another environment (what we call a <em>vat</em>). Instead of <code>obj.foo()</code>, we
can write <code>E(obj).foo()</code> or the syntactic sugar, <code>obj~.foo()</code> and get a
promise for the result. We call this syntactic sugar <a href="https://github.com/Agoric/proposal-wavy-dot" target="_blank" rel="noopener noreferrer">'wavy dot'<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. The syntax
means &quot;deliver the message foo() to the actual object asynchronously,
in its own turn, wherever and whenever it is, even if it is local.&quot;
Using <code>E</code> or <code>~.</code>, you can talk asynchronously to local and remote objects
in exactly the same way. For example, the first thing you might want
to do is tap the gallery faucet to get a pixel for free:</p> <div class="language-js extra-class"><pre class="language-js"><code>px <span class="token operator">=</span> home<span class="token punctuation">.</span>gallery<span class="token operator">~</span><span class="token punctuation">.</span><span class="token function">tapFaucet</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><code>tapFaucet</code> returns a pixel and saves it under <code>px</code>. The pixel that you receive is
actually in the form of an ERTP payment. <a href="/documentation/ertp/guide/">ERTP</a> (Electronic Rights Transfer Protocol)
is our smart contract framework for handling transferable objects.
Payments have a few functions. Let's call <code>getBalance()</code> on our payment
to see which pixel we received.</p> <div class="language-js extra-class"><pre class="language-js"><code>px<span class="token operator">~</span><span class="token punctuation">.</span><span class="token function">getBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>You might see something like:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;label&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;assay&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>Presence <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string">&quot;allegedName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pixels&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token string">&quot;units&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token string">&quot;x&quot;</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;y&quot;</span><span class="token operator">:</span><span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The <code>units</code> tells us which pixels we've received. <code>{ x:1, y:4 }</code>
means that we got a pixel that is in the fifth row (<code>y:4</code>) and 2 pixels
from the left (<code>x:1</code>). To color the pixel, we need to get the use
object from the payment. You can think of the use object as a regular
JavaScript object that just happens to be associated with an ERTP
payment.</p> <div class="language-js extra-class"><pre class="language-js"><code>use <span class="token operator">=</span> px<span class="token operator">~</span><span class="token punctuation">.</span><span class="token function">getUse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>Your use object will be stored under <code>use</code>. Now we
can use it to color.</p> <div class="language-js extra-class"><pre class="language-js"><code>use<span class="token operator">~</span><span class="token punctuation">.</span><span class="token function">changeColorAll</span><span class="token punctuation">(</span><span class="token string">'#FF69B4'</span><span class="token punctuation">)</span>
</code></pre></div><p>The following commands show a pixel being obtained from the faucet,
getting the 'use' object, coloring the pixel, and selling a pixel to the gallery through an
escrow smart contract.</p> <div class="language- extra-class"><pre class="language-text"><code>px = home.gallery~.tapFaucet();
px~.getBalance();
use = px~.getUse();
use~.changeColorAll('yellow');
px2 = home.gallery~.tapFaucet();
asset2 = px2~.getBalance();
asset2.then(a =&gt; home.gallery~.pricePixelUnitOps(a));
hostInvite = home.gallery~.sellToGallery(asset2);
seat = hostInvite~.host~.redeem(hostInvite~.inviteP);
offered = seat~.offer(px2);
assays = home.gallery~.getAssays();
pxPurse = assays~.pixelAssay~.makeEmptyPurse();
dustPurse = assays~.dustAssay~.makeEmptyPurse();
collected = offered.then(_ =&gt; home.gallery~.collectFromGallery(seat, dustPurse, pxPurse, 'my escrow'));
collected.then(_ =&gt; dustPurse~.getBalance());
</code></pre></div><p>Woohoo! We're now a few dust richer than when we started.</p> <p>Learn more about ERTP and our pixel demo <a href="https://github.com/Agoric/ERTP" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>To see the contracts you've uploaded <a href="https://github.com/Agoric/cosmic-swingset/blob/master/lib/ag-solo/contracts/README-contract.md" target="_blank" rel="noopener noreferrer">as per the README<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, try:</p> <div class="language-js extra-class"><pre class="language-js"><code>home<span class="token punctuation">.</span>uploads<span class="token operator">~</span><span class="token punctuation">.</span><span class="token function">list</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
home<span class="token punctuation">.</span>uploads<span class="token operator">~</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'encouragementBot'</span><span class="token punctuation">)</span><span class="token operator">~</span><span class="token punctuation">.</span><span class="token function">spawn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">~</span><span class="token punctuation">.</span><span class="token function">encourageMe</span><span class="token punctuation">(</span><span class="token string">'Person'</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="initial-endowments"><a href="#initial-endowments" class="header-anchor">#</a> Initial Endowments</h2> <p>When a client is started up, it has a few items in a record named home.</p> <ul><li>gallery: the Pixel Gallery, described above</li> <li>purse: a purse that can hold pixel Dust</li> <li>moolah: a purse that starts out with 1000 <code>moolah</code></li> <li>sharingService: a service that makes it possible to pass capabilities between vats</li> <li>canvasStatePublisher: a service with the message subscribe(callback)</li> <li><a href="https://github.com/Agoric/cosmic-swingset/blob/master/lib/ag-solo/contracts/README-contract.md" target="_blank" rel="noopener noreferrer">uploads<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>: a private directory
of contracts you've uploaded</li> <li>registrar: a public directory for published objects</li> <li>localTimerService and chainTimerService: tools for scheduling</li> <li><a href="/documentation/zoe/guide/">zoe</a>: support for contracts with Offer-Safety Enforcement</li></ul> <h3 id="sharingservice"><a href="#sharingservice" class="header-anchor">#</a> sharingService</h3> <p><code>home.sharingService</code> is a service that lets you connect to
other vats that are connected to the same remote chain vat. sharingService
has three methods: <code>createSharedMap(name)</code>, <code>grabSharedMap(name)</code>, and
<code>validate(sharedMap)</code>. These allow you to create a SharedMap which you can
use to pass items to and from another vat. The sharingService's
methods are designed to allow you to share a newly created sharedMap
with one other vat, after which the name can't be reused.</p> <p>The way to use it is to call <code>createSharedMap()</code>with a name that you share
with someone else. They then call <code>grabSharedMap</code>() and pass the name you
gave. If they get a valid SharedMap, then you have a private
channel. If they don't get it, then someone else must have tried to
grab the name first, and you can discard that one and try again.</p> <p>Once you each have an end, either of you can call <code>addEntry(key, value)</code>
to store an object, which the other party can retrieve with
<code>lookup(key)</code>.</p> <h3 id="canvasstatepublisher"><a href="#canvasstatepublisher" class="header-anchor">#</a> canvasStatePublisher</h3> <p><code>home.canvasStatePublisher</code> has a <code>subscribe()</code> method, which takes a callback
function. When the state of the pixel gallery changes, the callback's
<code>notify()</code> method is called with the new state.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/documentation/assets/js/app.4487f628.js" defer></script><script src="/documentation/assets/js/2.a254c233.js" defer></script><script src="/documentation/assets/js/6.8d9d2e21.js" defer></script>
  </body>
</html>
